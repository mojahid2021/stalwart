# ==============================================
# Stalwart Multi-Service Setup - Example .env
# ==============================================
# This is a WORKING EXAMPLE with sample passwords
# For production: Generate secure passwords!
#
# Quick password generation:
# openssl rand -base64 32
#
# Copy this file to .env and customize:
# cp .env.example .env
# ==============================================

# ==============================================
# REQUIRED: Admin Credentials
# ==============================================
# Admin password for Stalwart web interface (http://localhost:8080)
# Login with: admin / YOUR_ADMIN_SECRET
# SECURITY: Replace with a strong password!
# Generate with: openssl rand -base64 32
ADMIN_SECRET=REPLACE_WITH_STRONG_RANDOM_PASSWORD

# ==============================================
# Database Configuration
# ==============================================
# PostgreSQL database password
# SECURITY: Replace with a strong password!
# Generate with: openssl rand -base64 32
DB_PASSWORD=REPLACE_WITH_STRONG_RANDOM_PASSWORD

# ==============================================
# Cache Configuration
# ==============================================
# Redis cache password
# SECURITY: Replace with a strong password!
# Generate with: openssl rand -base64 32
REDIS_PASSWORD=REPLACE_WITH_STRONG_RANDOM_PASSWORD

# ==============================================
# Object Storage Configuration
# ==============================================
# MinIO S3-compatible storage credentials
MINIO_USER=minioadmin
# SECURITY: Replace with a strong password!
# Generate with: openssl rand -base64 32
MINIO_PASSWORD=REPLACE_WITH_STRONG_RANDOM_PASSWORD

# ==============================================
# Domain Configuration (for separate domains setup)
# ==============================================
# Required for docker-compose.advanced-separate-domains.yml
# Mail services domain (SMTP, IMAP, POP3)
MAIL_DOMAIN=mail.example.com

# Admin panel domain (separate from mail)
ADMIN_DOMAIN=admin.example.com

# Email for Let's Encrypt ACME notifications
ACME_EMAIL=admin@example.com

# ==============================================
# System Configuration
# ==============================================
# Server timezone (examples: UTC, America/New_York, Europe/London, Asia/Tokyo)
TZ=UTC

# ==============================================
# Resource Configuration
# ==============================================
# These are MINIMUM guaranteed resources (soft limits)
# Containers can use MORE when needed (dynamic allocation)

# Stalwart Mail Server
STALWART_MEMORY_RESERVATION=1G
STALWART_CPU_RESERVATION=1

# PostgreSQL Database
POSTGRES_MEMORY_RESERVATION=512M
POSTGRES_CPU_RESERVATION=0.5

# Redis Cache
REDIS_MEMORY_RESERVATION=256M
REDIS_CPU_RESERVATION=0.25

# MinIO Object Storage
MINIO_MEMORY_RESERVATION=512M
MINIO_CPU_RESERVATION=0.5

# ==============================================
# Optional: Hard Limits (Uncomment to Cap Usage)
# ==============================================
# Uncomment these if you want to PREVENT containers from using too much
# By default, containers can use as much as they need (dynamic allocation)
#
# STALWART_MEMORY_LIMIT=4G
# STALWART_CPU_LIMIT=4
# POSTGRES_MEMORY_LIMIT=2G
# REDIS_MEMORY_LIMIT=1G
# MINIO_MEMORY_LIMIT=2G

# ==============================================
# SECURITY NOTES
# ==============================================
# 1. NEVER use these example passwords in production!
# 2. Generate strong passwords: openssl rand -base64 32
# 3. Set file permissions: chmod 600 .env
# 4. NEVER commit .env to version control
# 5. Use secrets management in production (Vault, AWS Secrets Manager, etc.)
# 6. Rotate passwords regularly
#
# After creating your .env file:
#   chmod 600 .env
#   chown $USER:$USER .env
#
# Verify it's not tracked by git:
#   git status
#
# Start services:
#   docker compose -f docker-compose.advanced.yml up -d --build
#
# Check logs:
#   docker compose -f docker-compose.advanced.yml logs -f
#
# Access admin interface:
#   http://localhost:8080
#   Login: admin / YOUR_ADMIN_SECRET
# ==============================================
